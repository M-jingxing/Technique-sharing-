# nodejs 内存管理机制

首先 **内存** 是什么， 维基百科定义 随机存取存储器，也叫主存，是与CPU直接交换数据的内部存储器。它可以随时读写，而且速度很快，通常作为操作系统或其他正在运行中的程式的临时资料存储媒介。

在cpu工作时可以直接进行数据交互的存储器， 所以在内存中的数据读写速度的非常快的， 这也保证了程序运行时的性能。
在V8中所有JavaScript对象都是通过**堆**来进行分配的

注： 堆（英语：Heap）是计算机科学中的一种特别的树状数据结构。若是满足以下特性，即可称为堆：“给定堆中任意节点 P 和 C，若 P 是 C 的母节点，那么 P 的值会小于等于（或大于等于） C 的值”， 故堆有最小堆与最大堆

## V8 的内存限制

在一般的后端开发语言中，对内存的使用并没有什么限制，但是node通过JavaScript使用的内存只能有一部分（在64位的系统中大概1.4GB， 32位0.7GB），是故在node单进程的情况下，对内存的使用需要更加的谨慎了，因为本来能提供给你使用的就不多。

作为一门服务端开发语言，Node 可以说是享受到了V8的高性能的同时，同时也被V8限制了很多。 

但是V8也提供了启动参数，来打开部分限制，
> node --max-old-space-size=1024 main.js // 设置老生代内存 单位MB

> node --max-new-space-size=1024 main.js // 设置新生代内存 单位KB

## V8 的垃圾回收机制 （GC）

https://segmentfault.com/a/1190000004934938
https://www.jianshu.com/p/d5f596f62d3f
## 内存泄漏排查工具

## 如何优化代码
